{"version":3,"sources":["components/Signin.js","components/Signup.js","components/HomePage.js","components/stream/OvVideo.js","components/stream/StreamComponent.js","components/dialog-extension/DialogExtension.js","components/chat/ChatComponent.js","layout/openvidu-layout.js","models/user-model.js","components/toolbar/ToolbarComponent.js","components/VideoRoomComponent.js","components/Vc.js","components/TeamPage.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","SignIn","email","changeEmail","password","changePassword","onLogin","setFlip","emailWarn","passwordWarn","classes","Container","component","maxWidth","className","Avatar","Typography","variant","TextField","required","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","e","target","error","helperText","type","Button","onClick","color","Grid","container","item","Link","href","Box","mt","SignUp","setName","onRegister","icon","marginRight","heroContent","background","padding","heroButtons","cardGrid","paddingTop","paddingBottom","card","height","cardMedia","cardContent","flexGrow","orange","getContrastText","deepOrange","extendedIcon","fab","position","bottom","right","HomePage","teamSecret","useParams","useState","createTeamOpen","setCreateTeamOpen","joinTeamOpen","setJoinTeamOpen","teamName","setTeamName","teamCode","setTeamCode","teams","setTeams","history","useHistory","useEffect","Cookies","get","push","handleJoinOpen","loadTeams","console","log","config","method","url","headers","Authorization","axios","then","response","JSON","stringify","data","catch","handleCreateClose","handleJoinClose","to","Math","random","toString","substring","style","textDecoration","Fab","Dialog","open","onClose","aria-labelledby","DialogTitle","DialogContent","DialogActions","CssBaseline","AppBar","Toolbar","justify","noWrap","remove","xs","sm","md","Card","justifyContent","CardContent","map","team","hoverable","cursor","secret","gutterBottom","CardActions","size","OvVideoComponent","props","videoRef","React","createRef","this","user","streamManager","getStreamManager","addVideoElement","current","session","on","event","undefined","parse","isScreenShareActive","autoPlay","stream","streamId","ref","muted","mutedSound","Component","StreamComponent","state","nickname","getNickname","showForm","isFormValid","handleChange","bind","handlePressKey","toggleNicknameForm","toggleSound","setState","preventDefault","isLocal","key","length","handleNickname","FormControl","IconButton","InputLabel","htmlFor","Input","onKeyPress","FormHelperText","isVideoActive","isAudioActive","DialogExtensionComponent","openviduExtensionUrl","isInstalled","goToChromePage","onNoClick","refreshBrowser","cancelClicked","window","location","reload","showDialog","ChatComponent","messageList","message","chatScroll","close","sendMessage","connectionId","from","document","setTimeout","userImg","getElementById","video","getContext","drawImage","messageReceived","scrollToBottom","replace","signal","scrollTop","scrollHeight","err","styleChat","chatDisplay","sessionId","i","getConnectionId","placeholder","Tooltip","title","OpenViduLayout","elem","sub","querySelector","oldWidth","x","y","animate","targetPosition","left","top","fixAspectRatio","$","stop","duration","easing","complete","call","css","videoHeight","videoWidth","prop","cssStr","parseInt","toFixed","heightStr","widthStr","minR","maxR","count","WIDTH","HEIGHT","targetHeight","maxArea","targetCols","targetRows","targetWidth","tWidth","tHeight","tRatio","colsAux","rowsAux","ceil","floor","area","ratio","children","offsetLeft","offsetTop","fixedRatio","minRatio","maxRatio","dimensions","getVideoRatio","getBestDimensions","row","rows","totalRowHeight","remainingShortRows","remainingHeightDiff","extraHeight","j","actualWidth","getCSSNumber","actualHeight","positionElement","element","layoutContainer","cheapUUID","bigWidth","bigHeight","getHeight","getWidth","availableRatio","bigOffsetTop","bigOffsetLeft","bigOnes","Array","prototype","filter","querySelectorAll","opts","bigClass","filterDisplayNone","smallOnes","bigPercentage","bigFirst","arrange","bigFixedRatio","bigMinRatio","bigMaxRatio","options","UserModel","audioActive","videoActive","screenShareActive","conecctionId","ToolbarComponent","fullscreen","camStatusChanged","micStatusChanged","screenShare","stopScreenShare","toggleFullscreen","leaveSession","toggleChat","localUser","showNotification","VideoRoomComponent","OPENVIDU_SERVER_URL","openviduServerUrl","hostname","OPENVIDU_SERVER_SECRET","openviduSecret","hasBeenUpdated","layout","sessionName","userName","remotes","localUserAccessAllowed","mySessionId","myUserName","subscribers","joinSession","onbeforeunload","updateLayout","nicknameChanged","closeDialogExtension","checkNotification","checkSize","initLayoutContainer","addEventListener","removeEventListener","OV","OpenVidu","initSession","subscribeToStreamCreated","connectToSession","token","connect","getToken","messgae","code","status","alert","clientData","connectWebCam","publisher","initPublisher","audioSource","videoSource","publishAudio","publishVideo","resolution","frameRate","insertMode","capabilities","publish","updateSubscribers","setNickname","setConnectionId","connection","setScreenShareActive","setStreamManager","subscribeToUserChanged","subscribeToStreamDestroyed","sendSignalUserChanged","videos","parentElement","classList","mySession","disconnect","setVideoActive","setAudioActive","remoteUsers","userStream","index","indexOf","splice","subscriber","subscribe","checkSomeoneShareScreen","newUser","setType","split","deleteSubscriber","forEach","signalOptions","fs","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","navigator","userAgent","mirror","showExtensionDialog","once","unpublish","openviduLayoutOptions","some","setLayoutOptions","property","offsetWidth","createSession","createToken","Promise","resolve","reject","customSessionId","session_id","Vc","sid","root","toolbar","paddingRight","toolbarIcon","mixins","appBar","zIndex","drawer","transition","transitions","create","sharp","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","menuButtonHidden","drawerPaper","whiteSpace","overflowX","drawerPaperClose","breakpoints","up","appBarSpacer","content","overflow","fixedHeight","bottomToolbar","socket","io","TeamPage","useRef","messages","setMessages","channels","setChannels","setOpen","openChannel","setOpenChannel","createChannelOpen","setCreateChannelOpen","invite","setInvite","channel","setChannel","loadChannels","handleInviteClose","is_vc","messageJSON","d","Date","text","timestamp","getTime","toUTCString","sender","jwt_decode","emit","room","clickChannel","loadMessages","justifyItems","s","clipboard","writeText","paddingLeft","clsx","edge","aria-label","Drawer","List","ListItem","button","ListItemIcon","ListItemText","primary","Divider","overflowY","currentTarget","Paper","elevation","marginBottom","align","slice","inputRef","multiline","onKeyDown","InputProps","endAdornment","InputAdornment","fontSize","App","useLocation","setEmail","setPassword","setEmailWarn","setPasswordWarn","flipped","setFlipped","pathname","validator","isEmail","isStrongPassword","minLength","minLowercase","minUppercase","minNumbers","minSymbols","login","set","expires","secure","register","path","exact","render","direction","minHeight","isFlipped","flipDirection","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.5f4d3e92.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Link from \"@material-ui/core/Link\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Box from \"@material-ui/core/Box\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignIn({ email, changeEmail, password, changePassword , onLogin ,setFlip,emailWarn,passwordWarn}) {\n  const classes = useStyles();\n  \n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign in\n        </Typography>\n        <form className={classes.form}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"email\"\n            label=\"Email Address\"\n            name=\"email\"\n            autoComplete=\"email\"\n            autoFocus\n            value={email}\n            onChange={(e) => changeEmail(e.target.value)}\n            error={emailWarn}\n            helperText={emailWarn ? \"Please enter a valid email address\" : \"\"}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            value={password}\n            onChange={(e) => changePassword(e.target.value)}\n            error={passwordWarn}\n            helperText={passwordWarn ? \"Please enter a password containing at least 1 special character and 8 characters\" : \"\"}\n          />\n          <Button\n            onClick={onLogin}\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Sign In\n          </Button>\n          <Grid container>\n            <Grid item>\n              <Link href=\"#\" variant=\"body2\" onClick={() => setFlip(true)}>\n                {\"Don't have an account? Sign Up\"}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={8}></Box>\n    </Container>\n  );\n}\n","import React, { useState } from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Link from \"@material-ui/core/Link\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Box from \"@material-ui/core/Box\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignUp({\n  email,\n  changeEmail,\n  password,\n  changePassword,\n  name,\n  setName,\n  onRegister,\n  setFlip,\n  emailWarn,\n  passwordWarn,\n}) {\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign up\n        </Typography>\n        <form className={classes.form}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"name\"\n            label=\"Name\"\n            name=\"name\"\n            autoComplete=\"Name\"\n            autoFocus\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"email\"\n            label=\"Email Address\"\n            name=\"email\"\n            autoComplete=\"email\"\n            autoFocus\n            value={email}\n            onChange={(e) => changeEmail(e.target.value)}\n            error={emailWarn}\n            helperText={emailWarn ? \"Please enter a valid email address\" : \"\"}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n            value={password}\n            onChange={(e) => changePassword(e.target.value)}\n            error={passwordWarn}\n            helperText={\n              passwordWarn\n                ? \"Please enter a password containing at least 1 special character and 8 characters\"\n                : \"\"\n            }\n          />\n          <Button\n            onClick={onRegister}\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Sign Up\n          </Button>\n          <Grid container>\n            <Grid item>\n              <Link href=\"#\" variant=\"body2\" onClick={() => setFlip(false)}>\n                {\"Already have an account? Sign In\"}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={8}></Box>\n    </Container>\n  );\n}\n","import { Avatar, Button, CardActionArea, Fab } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport Cookies, { set } from \"js-cookie\";\nimport { useEffect, useState } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport React from \"react\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\n\nimport { deepOrange } from \"@material-ui/core/colors\";\nimport VideoCallIcon from \"@material-ui/icons/VideoCall\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(1, 0, 5),\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  cardMedia: {\n    paddingTop: \"56.25%\", // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  orange: {\n    color: theme.palette.getContrastText(deepOrange[500]),\n    backgroundColor: deepOrange[500],\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1),\n  },\n  fab: {\n    position: \"fixed\",\n    bottom: theme.spacing(8),\n    right: theme.spacing(8),\n  },\n}));\n\nexport default function HomePage() {\n  const { teamSecret } = useParams();\n  const [createTeamOpen, setCreateTeamOpen] = useState(false);\n  const [joinTeamOpen, setJoinTeamOpen] = useState(false);\n  const [teamName, setTeamName] = useState(\"\");\n  const [teamCode, setTeamCode] = useState(\"\");\n  const [teams, setTeams] = useState([]);\n  const classes = useStyles();\n  const history = useHistory();\n\n  useEffect(() => {\n    if (!Cookies.get(\"token\")) {\n      history.push(\"/\");\n    }\n    if (teamSecret) {\n      setTeamCode(teamSecret);\n      handleJoinOpen();\n    }\n  }, [history]);\n\n  useEffect(() => {\n    loadTeams();\n  }, []);\n  const onJoinTeam = () => {\n    var config = {\n      method: \"post\",\n      url: `/api/secure/teams/${teamCode}`,\n      headers: {\n        Authorization: `Bearer ${Cookies.get(\"token\")}`,\n      },\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        setJoinTeamOpen(false);\n        loadTeams();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n  const onCreateTeam = () => {\n    var data = JSON.stringify({ name: teamName });\n\n    var config = {\n      method: \"put\",\n      url: \"/api/secure/teams/\",\n      headers: {\n        Authorization: `Bearer ${Cookies.get(\"token\")}`,\n        \"Content-Type\": \"application/json\",\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        setCreateTeamOpen(false);\n        loadTeams();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n  function loadTeams() {\n    console.log(\"bla\");\n    var config = {\n      method: \"get\",\n      url: \"/api/secure/teams/\",\n      headers: {\n        Authorization: `Bearer ${Cookies.get(\"token\")}`,\n      },\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        setTeams(response.data);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n  const openTeam = (secret) => {\n    var win = window.open(`/team/${secret}`, \"_blank\");\n  };\n  function onCreateCall() {\n    var win = window.open(\n      `/vc/${Math.random().toString(36).substring(7)}`,\n      \"_blank\"\n    );\n  }\n\n  const handleCreateOpen = () => {\n    setCreateTeamOpen(true);\n  };\n\n  const handleCreateClose = () => {\n    setCreateTeamOpen(false);\n  };\n\n  const handleJoinOpen = () => {\n    setJoinTeamOpen(true);\n  };\n\n  const handleJoinClose = () => {\n    setTeamCode(\"\");\n    setJoinTeamOpen(false);\n  };\n\n  return (\n    <>\n      <Link\n        to={`/vc/${Math.random().toString(36).substring(7)}`}\n        style={{ textDecoration: \"none\" }}\n        target=\"_blank\"\n      >\n        <Fab variant=\"extended\" className={classes.fab} color=\"primary\">\n          <VideoCallIcon className={classes.extendedIcon} />\n          Start Instant Call\n        </Fab>\n      </Link>\n      <div>\n        <Dialog\n          open={createTeamOpen}\n          onClose={handleCreateClose}\n          aria-labelledby=\"form-dialog-title\"\n          maxWidth=\"xs\"\n          fullWidth={true}\n        >\n          <DialogTitle id=\"form-dialog-title\">Create New Team</DialogTitle>\n          <DialogContent>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"name\"\n              label=\"Team Name\"\n              fullWidth\n              value={teamName}\n              onChange={(e) => setTeamName(e.target.value)}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleCreateClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={onCreateTeam} color=\"primary\">\n              Create Team\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n      <div>\n        <Dialog\n          open={joinTeamOpen}\n          onClose={handleJoinClose}\n          aria-labelledby=\"form-dialog-title\"\n          maxWidth=\"xs\"\n          fullWidth={true}\n        >\n          <DialogTitle id=\"form-dialog-title\">Join existing team</DialogTitle>\n          <DialogContent>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"name\"\n              label=\"Team Code\"\n              fullWidth\n              value={teamCode}\n              onChange={(e) => setTeamCode(e.target.value)}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleJoinClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={onJoinTeam} color=\"primary\">\n              Join Team\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n      <CssBaseline />\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Grid container justify=\"flex-start\">\n            <Typography variant=\"h4\" color=\"inherit\" noWrap>\n              Relier\n            </Typography>\n          </Grid>\n          <Grid container justify=\"flex-end\">\n            <Button\n              color=\"inherit\"\n              variant=\"outlined\"\n              onClick={() => {\n                Cookies.remove(\"token\");\n                history.push(\"/\");\n              }}\n            >\n              Logout\n            </Button>\n          </Grid>\n        </Toolbar>\n      </AppBar>\n      <main>\n        <Container className={classes.cardGrid} maxWidth=\"md\">\n          {/* End hero unit */}\n          <Grid container spacing={4}>\n            <Grid item xs={12} sm={6} md={4}>\n              <Card\n                className={classes.card}\n                style={{\n                  alignItems: \"center\",\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  justifyContent: \"center\",\n                }}\n              >\n                <CardContent\n                  style={{\n                    alignItems: \"center\",\n                    display: \"flex\",\n                    // flexDirection: \"column\",\n                    justifyContent: \"center\",\n                    paddingBottom: 0,\n                  }}\n                >\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={handleCreateOpen}\n                  >\n                    Create Team\n                  </Button>\n                </CardContent>\n                <CardContent\n                  style={{\n                    alignItems: \"center\",\n                    display: \"flex\",\n                    // flexDirection: \"column\",\n                    justifyContent: \"center\",\n                    // paddingBottom: 0,\n                  }}\n                >\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={handleJoinOpen}\n                  >\n                    Join Team\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n            {teams.map((team) => (\n              <Grid item key={team.id} xs={12} sm={6} md={4}>\n                <Card className={classes.card} hoverable>\n                  <div style={{ cursor: \"pointer\" }}>\n                    <Link\n                      to={`/team/${team.secret}`}\n                      style={{ textDecoration: \"none\" }}\n                      target=\"_blank\"\n                    >\n                      <CardContent\n                        style={{\n                          alignItems: \"center\",\n                          display: \"flex\",\n                          // flexDirection: \"column\",\n                          paddingBottom: 0,\n                          justifyContent: \"center\",\n                        }}\n                      >\n                        <Avatar className={classes.orange} variant=\"square\">\n                          {team.name.substring(0, 1)}\n                        </Avatar>\n                      </CardContent>\n                      <CardContent\n                        className={classes.cardContent}\n                        style={{ paddingBottom: 0 }}\n                      >\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                          {team.name}\n                        </Typography>\n                      </CardContent>\n                    </Link>\n                  </div>\n                  <CardActions>\n                    <Button size=\"small\" color=\"primary\" onClick={() => {}}>\n                      Leave\n                    </Button>\n                  </CardActions>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </Container>\n      </main>\n    </>\n  );\n}\n","import React, { Component } from 'react';\nimport './StreamComponent.css';\n\nexport default class OvVideoComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.videoRef = React.createRef();\n    }\n\n    componentDidMount() {\n        if (this.props && this.props.user.streamManager && !!this.videoRef) {\n            console.log('PROPS: ', this.props);\n            this.props.user.getStreamManager().addVideoElement(this.videoRef.current);\n        }\n\n        if (this.props && this.props.user.streamManager.session && this.props.user && !!this.videoRef) {\n            this.props.user.streamManager.session.on('signal:userChanged', (event) => {\n                const data = JSON.parse(event.data);\n                if (data.isScreenShareActive !== undefined) {\n                    this.props.user.getStreamManager().addVideoElement(this.videoRef.current);\n                }\n            });\n        }\n    }\n\n    componentDidUpdate(props) {\n        if (props && !!this.videoRef) {\n            this.props.user.getStreamManager().addVideoElement(this.videoRef.current);\n        }\n    }\n\n    render() {\n        return (\n            <video\n                autoPlay={true}\n                id={'video-' + this.props.user.getStreamManager().stream.streamId}\n                ref={this.videoRef}\n                muted={this.props.mutedSound}\n            />\n        );\n    }\n}\n","import React, { Component } from \"react\";\nimport \"./StreamComponent.css\";\nimport OvVideoComponent from \"./OvVideo\";\n\nimport MicOff from \"@material-ui/icons/MicOff\";\nimport VideocamOff from \"@material-ui/icons/VideocamOff\";\nimport VolumeUp from \"@material-ui/icons/VolumeUp\";\nimport VolumeOff from \"@material-ui/icons/VolumeOff\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport HighlightOff from \"@material-ui/icons/HighlightOff\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport { Card, Paper } from \"@material-ui/core\";\n\nexport default class StreamComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      nickname: this.props.user.getNickname(),\n      showForm: false,\n      mutedSound: false,\n      isFormValid: true,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handlePressKey = this.handlePressKey.bind(this);\n    this.toggleNicknameForm = this.toggleNicknameForm.bind(this);\n    this.toggleSound = this.toggleSound.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({ nickname: event.target.value });\n    event.preventDefault();\n  }\n\n  toggleNicknameForm() {\n    if (this.props.user.isLocal()) {\n      this.setState({ showForm: !this.state.showForm });\n    }\n  }\n\n  toggleSound() {\n    this.setState({ mutedSound: !this.state.mutedSound });\n  }\n\n  handlePressKey(event) {\n    if (event.key === \"Enter\") {\n      console.log(this.state.nickname);\n      if (this.state.nickname.length >= 3 && this.state.nickname.length <= 20) {\n        this.props.handleNickname(this.state.nickname);\n        this.toggleNicknameForm();\n        this.setState({ isFormValid: true });\n      } else {\n        this.setState({ isFormValid: false });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"OT_widget-container\">\n        <div className=\"pointer nickname\">\n          {this.state.showForm ? (\n            <FormControl id=\"nicknameForm\">\n              <IconButton\n                color=\"inherit\"\n                id=\"closeButton\"\n                onClick={this.toggleNicknameForm}\n              >\n                <HighlightOff />\n              </IconButton>\n              <InputLabel\n                htmlFor=\"name-simple\"\n                id=\"label\"\n                style={{ padding: \"10px\" }}\n              >\n                Nickname\n              </InputLabel>\n              <Input\n                color=\"inherit\"\n                id=\"input\"\n                value={this.state.nickname}\n                onChange={this.handleChange}\n                onKeyPress={this.handlePressKey}\n                required\n              />\n              {!this.state.isFormValid && this.state.nickname.length <= 0 && (\n                <FormHelperText id=\"name-error-text\">\n                  Nickname is too short!\n                </FormHelperText>\n              )}\n              {!this.state.isFormValid && this.state.nickname.length >= 20 && (\n                <FormHelperText id=\"name-error-text\">\n                  Nickname is too long!\n                </FormHelperText>\n              )}\n            </FormControl>\n          ) : (\n            <div style={{ padding: \"10px\" }} onClick={this.toggleNicknameForm}>\n              <span id=\"nickname\">{this.props.user.getNickname()}</span>\n              {this.props.user.isLocal() && <span id=\"\"> (edit)</span>}\n            </div>\n          )}\n        </div>\n\n        {this.props.user !== undefined &&\n        this.props.user.getStreamManager() !== undefined ? (\n          <div className=\"streamComponent\">\n            <OvVideoComponent\n              user={this.props.user}\n              mutedSound={this.state.mutedSound}\n            />\n            <div id=\"statusIcons\">\n              {!this.props.user.isVideoActive() ? (\n                <div id=\"camIcon\">\n                  <VideocamOff id=\"statusCam\" />\n                </div>\n              ) : null}\n\n              {!this.props.user.isAudioActive() ? (\n                <div id=\"micIcon\">\n                  <MicOff id=\"statusMic\" />\n                </div>\n              ) : null}\n            </div>\n            <div>\n              {!this.props.user.isLocal() && (\n                <IconButton id=\"volumeButton\" onClick={this.toggleSound}>\n                  {this.state.mutedSound ? (\n                    <VolumeOff color=\"secondary\" />\n                  ) : (\n                    <VolumeUp />\n                  )}\n                </IconButton>\n              )}\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport './DialogExtension.css';\n\nexport default class DialogExtensionComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.openviduExtensionUrl =\n            'https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold';\n        //isInstalled: boolean;\n\n        this.state = {\n            isInstalled: false,\n        };\n        this.goToChromePage = this.goToChromePage.bind(this);\n        this.onNoClick = this.onNoClick.bind(this);\n        this.refreshBrowser = this.refreshBrowser.bind(this);\n    }\n\n    componentWillReceiveProps(props) {}\n\n    componentDidMount() {}\n\n    onNoClick() {\n        // this.cancel.emit();\n        this.props.cancelClicked();\n    }\n\n    goToChromePage() {\n        window.open(this.openviduExtensionUrl);\n        this.setState({ isInstalled: true });\n    }\n\n    refreshBrowser() {\n        window.location.reload();\n    }\n\n    render() {\n        return (\n            <div>\n                {this.props && this.props.showDialog ? (\n                    <div id=\"dialogExtension\">\n                        <Card id=\"card\">\n                            <CardContent>\n                                <Typography color=\"textSecondary\">Hello</Typography>\n                                <Typography color=\"textSecondary\">\n                                    You need install this chrome extension and refresh the browser for can share your screen.\n                                </Typography>\n                            </CardContent>\n                            <CardActions>\n                                <Button size=\"small\" onClick={this.onNoClick}>\n                                    Cancel\n                                </Button>\n\n                                <Button size=\"small\" onClick={this.goToChromePage}>\n                                    Install\n                                </Button>\n                                {this.state.isInstalled ? (\n                                    <Button size=\"small\" onClick={this.refreshBrowser}>\n                                        Refresh\n                                    </Button>\n                                ) : null}\n                            </CardActions>\n                        </Card>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport Fab from '@material-ui/core/Fab';\nimport HighlightOff from '@material-ui/icons/HighlightOff';\nimport Send from '@material-ui/icons/Send';\n\nimport './ChatComponent.css';\nimport { Tooltip } from '@material-ui/core';\n\nexport default class ChatComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            messageList: [],\n            message: '',\n        };\n        this.chatScroll = React.createRef();\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handlePressKey = this.handlePressKey.bind(this);\n        this.close = this.close.bind(this);\n        this.sendMessage = this.sendMessage.bind(this);\n    }\n\n\n    componentDidMount() {\n        this.props.user.getStreamManager().stream.session.on('signal:chat', (event) => {\n            const data = JSON.parse(event.data);\n            let messageList = this.state.messageList;\n            messageList.push({ connectionId: event.from.connectionId, nickname: data.nickname, message: data.message });\n            const document = window.document;\n            setTimeout(() => {\n                const userImg = document.getElementById('userImg-' + (this.state.messageList.length - 1));\n                const video = document.getElementById('video-' + data.streamId);\n                const avatar = userImg.getContext('2d');\n                avatar.drawImage(video, 200, 120, 285, 285, 0, 0, 60, 60);\n                this.props.messageReceived();\n            }, 50);\n            this.setState({ messageList: messageList });\n            this.scrollToBottom();\n        });\n    }\n\n    handleChange(event) {\n        this.setState({ message: event.target.value });\n    }\n\n    handlePressKey(event) {\n        if (event.key === 'Enter') {\n            this.sendMessage();\n        }\n    }\n\n    sendMessage() {\n        console.log(this.state.message);\n        if (this.props.user && this.state.message) {\n            let message = this.state.message.replace(/ +(?= )/g, '');\n            if (message !== '' && message !== ' ') {\n                const data = { message: message, nickname: this.props.user.getNickname(), streamId: this.props.user.getStreamManager().stream.streamId };\n                this.props.user.getStreamManager().stream.session.signal({\n                    data: JSON.stringify(data),\n                    type: 'chat',\n                });\n            }\n        }\n        this.setState({ message: '' });\n    }\n\n    scrollToBottom() {\n        setTimeout(() => {\n            try {\n                this.chatScroll.current.scrollTop = this.chatScroll.current.scrollHeight;\n            } catch (err) {}\n        }, 20);\n    }\n\n    close() {\n        this.props.close(undefined);\n    }\n\n    render() {\n        const styleChat = { display: this.props.chatDisplay };\n        return (\n            <div id=\"chatContainer\">\n                <div id=\"chatComponent\" style={styleChat}>\n                    <div id=\"chatToolbar\">\n                        <span>{this.props.user.getStreamManager().stream.session.sessionId} - CHAT</span>\n                        <IconButton id=\"closeButton\" onClick={this.close}>\n                            <HighlightOff color=\"secondary\" />\n                        </IconButton>\n                    </div>\n                    <div className=\"message-wrap\" ref={this.chatScroll}>\n                        {this.state.messageList.map((data, i) => (\n                            <div\n                                key={i}\n                                id=\"remoteUsers\"\n                                className={\n                                    'message' + (data.connectionId !== this.props.user.getConnectionId() ? ' left' : ' right')\n                                }\n                            >\n                                <canvas id={'userImg-' + i} width=\"60\" height=\"60\" className=\"user-img\" />\n                                <div className=\"msg-detail\">\n                                    <div className=\"msg-info\">\n                                        <p> {data.nickname}</p>\n                                    </div>\n                                    <div className=\"msg-content\">\n                                        <span className=\"triangle\" />\n                                        <p className=\"text\">{data.message}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                    <div id=\"messageInput\">\n                        <input\n                            placeholder=\"Send a messge\"\n                            id=\"chatInput\"\n                            value={this.state.message}\n                            onChange={this.handleChange}\n                            onKeyPress={this.handlePressKey}\n                        />\n                        <Tooltip title=\"Send message\">\n                            <Fab size=\"small\" id=\"sendButton\" onClick={this.sendMessage}>\n                                <Send />\n                            </Fab>\n                        </Tooltip>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import $ from 'jquery';\n\nclass OpenViduLayout {\n  layoutContainer;\n  opts ;\n\n  fixAspectRatio(elem, width) {\n    const sub = elem.querySelector('.OT_root');\n    if (sub) {\n      // If this is the parent of a subscriber or publisher then we need\n      // to force the mutation observer on the publisher or subscriber to\n      // trigger to get it to fix it's layout\n      const oldWidth = sub.style.width;\n      sub.style.width = width + 'px';\n      // sub.style.height = height + 'px';\n      sub.style.width = oldWidth || '';\n    }\n  }\n\n positionElement(elem, x, y, width, height, animate) {\n    const targetPosition = {\n      left: x + 'px',\n      top: y + 'px',\n      width: width + 'px',\n      height: height + 'px',\n    };\n\n    this.fixAspectRatio(elem, width);\n\n    if (animate && $) {\n      $(elem).stop();\n      $(elem).animate(targetPosition, animate.duration || 200, animate.easing || 'swing', () => {\n        this.fixAspectRatio(elem, width);\n        if (animate.complete) {\n          animate.complete.call(this);\n        }\n      });\n    } else {\n      $(elem).css(targetPosition);\n    }\n    this.fixAspectRatio(elem, width);\n  }\n\n  getVideoRatio(elem) {\n    if (!elem) {\n      return 3 / 4;\n    }\n    const video = elem.querySelector('video');\n    if (video && video.videoHeight && video.videoWidth) {\n      return video.videoHeight / video.videoWidth;\n    } else if (elem.videoHeight && elem.videoWidth) {\n      return elem.videoHeight / elem.videoWidth;\n    }\n    return 3 / 4;\n  }\n\n   getCSSNumber(elem, prop) {\n    const cssStr = $(elem).css(prop);\n    return cssStr ? parseInt(cssStr, 10) : 0;\n  }\n\n  // Really cheap UUID function\n   cheapUUID() {\n    return (Math.random() * 100000000).toFixed(0);\n  }\n\n   getHeight(elem) {\n    const heightStr = $(elem).css('height');\n    return heightStr ? parseInt(heightStr, 10) : 0;\n  }\n\n   getWidth(elem) {\n    const widthStr = $(elem).css('width');\n    return widthStr ? parseInt(widthStr, 10) : 0;\n  }\n\n   getBestDimensions(minR , maxR , count , WIDTH, HEIGHT, targetHeight) {\n    let maxArea, targetCols, targetRows, targetWidth, tWidth, tHeight, tRatio;\n\n    // Iterate through every possible combination of rows and columns\n    // and see which one has the least amount of whitespace\n    for (let i = 1; i <= count; i++) {\n      const colsAux = i;\n      const rowsAux = Math.ceil(count / colsAux);\n\n      // Try taking up the whole height and width\n      tHeight = Math.floor(HEIGHT / rowsAux);\n      tWidth = Math.floor(WIDTH / colsAux);\n\n      tRatio = tHeight / tWidth;\n      if (tRatio > maxR) {\n        // We went over decrease the height\n        tRatio = maxR;\n        tHeight = tWidth * tRatio;\n      } else if (tRatio < minR) {\n        // We went under decrease the width\n        tRatio = minR;\n        tWidth = tHeight / tRatio;\n      }\n\n      const area = tWidth * tHeight * count;\n\n      // If this width and height takes up the most space then we're going with that\n      if (maxArea === undefined || area > maxArea) {\n        maxArea = area;\n        targetHeight = tHeight;\n        targetWidth = tWidth;\n        targetCols = colsAux;\n        targetRows = rowsAux;\n      }\n    }\n    return {\n      maxArea: maxArea,\n      targetCols: targetCols,\n      targetRows: targetRows,\n      targetHeight: targetHeight,\n      targetWidth: targetWidth,\n      ratio: targetHeight / targetWidth,\n    };\n  }\n\n   arrange(\n    children,\n    WIDTH,\n    HEIGHT,\n    offsetLeft,\n    offsetTop,\n    fixedRatio,\n    minRatio,\n    maxRatio,\n    animate,\n  ) {\n    let targetHeight;\n\n    const count = children.length;\n    let dimensions;\n\n    if (!fixedRatio) {\n      dimensions = this.getBestDimensions(minRatio, maxRatio, count, WIDTH, HEIGHT, targetHeight);\n    } else {\n      // Use the ratio of the first video element we find to approximate\n      const ratio = this.getVideoRatio(children.length > 0 ? children[0] : null);\n      dimensions = this.getBestDimensions(ratio, ratio, count, WIDTH, HEIGHT, targetHeight);\n    }\n\n    // Loop through each stream in the container and place it inside\n    let x = 0,\n      y = 0;\n    const rows = [];\n    let row;\n    // Iterate through the children and create an array with a new item for each row\n    // and calculate the width of each row so that we know if we go over the size and need\n    // to adjust\n    for (let i = 0; i < children.length; i++) {\n      if (i % dimensions.targetCols === 0) {\n        // This is a new row\n        row = {\n          children: [],\n          width: 0,\n          height: 0,\n        };\n        rows.push(row);\n      }\n      const elem = children[i];\n      row.children.push(elem);\n      let targetWidth = dimensions.targetWidth;\n      targetHeight = dimensions.targetHeight;\n      // If we're using a fixedRatio then we need to set the correct ratio for this element\n      if (fixedRatio) {\n        targetWidth = targetHeight / this.getVideoRatio(elem);\n      }\n      row.width += targetWidth;\n      row.height = targetHeight;\n    }\n    // Calculate total row height adjusting if we go too wide\n    let totalRowHeight = 0;\n    let remainingShortRows = 0;\n    for (let i = 0; i < rows.length; i++) {\n      row = rows[i];\n      if (row.width > WIDTH) {\n        // Went over on the width, need to adjust the height proportionally\n        row.height = Math.floor(row.height * (WIDTH / row.width));\n        row.width = WIDTH;\n      } else if (row.width < WIDTH) {\n        remainingShortRows += 1;\n      }\n      totalRowHeight += row.height;\n    }\n    if (totalRowHeight < HEIGHT && remainingShortRows > 0) {\n      // We can grow some of the rows, we're not taking up the whole height\n      let remainingHeightDiff = HEIGHT - totalRowHeight;\n      totalRowHeight = 0;\n      for (let i = 0; i < rows.length; i++) {\n        row = rows[i];\n        if (row.width < WIDTH) {\n          // Evenly distribute the extra height between the short rows\n          let extraHeight = remainingHeightDiff / remainingShortRows;\n          if (extraHeight / row.height > (WIDTH - row.width) / row.width) {\n            // We can't go that big or we'll go too wide\n            extraHeight = Math.floor((WIDTH - row.width) / row.width * row.height);\n          }\n          row.width += Math.floor(extraHeight / row.height * row.width);\n          row.height += extraHeight;\n          remainingHeightDiff -= extraHeight;\n          remainingShortRows -= 1;\n        }\n        totalRowHeight += row.height;\n      }\n    }\n    // vertical centering\n    y = (HEIGHT - totalRowHeight) / 2;\n    // Iterate through each row and place each child\n    for (let i = 0; i < rows.length; i++) {\n      row = rows[i];\n      // center the row\n      const rowMarginLeft = (WIDTH - row.width) / 2;\n      x = rowMarginLeft;\n      for (let j = 0; j < row.children.length; j++) {\n        const elem = row.children[j];\n\n        let targetWidth = dimensions.targetWidth;\n        targetHeight = row.height;\n        // If we're using a fixedRatio then we need to set the correct ratio for this element\n        if (fixedRatio) {\n          targetWidth = Math.floor(targetHeight / this.getVideoRatio(elem));\n        }\n        elem.style.position = 'absolute';\n        // $(elem).css('position', 'absolute');\n        const actualWidth =\n          targetWidth -\n          this.getCSSNumber(elem, 'paddingLeft') -\n          this.getCSSNumber(elem, 'paddingRight') -\n          this.getCSSNumber(elem, 'marginLeft') -\n          this.getCSSNumber(elem, 'marginRight') -\n          this.getCSSNumber(elem, 'borderLeft') -\n          this.getCSSNumber(elem, 'borderRight');\n\n        const actualHeight =\n          targetHeight -\n          this.getCSSNumber(elem, 'paddingTop') -\n          this.getCSSNumber(elem, 'paddingBottom') -\n          this.getCSSNumber(elem, 'marginTop') -\n          this.getCSSNumber(elem, 'marginBottom') -\n          this.getCSSNumber(elem, 'borderTop') -\n          this.getCSSNumber(elem, 'borderBottom');\n\n        this.positionElement(elem, x + offsetLeft, y + offsetTop, actualWidth, actualHeight, animate);\n        x += targetWidth;\n      }\n      y += targetHeight;\n    }\n  }\n\n filterDisplayNone(element) {\n    return element.style.display !== 'none';\n  }\n\n  updateLayout() {\n    if (this.layoutContainer.style.display === 'none') {\n      return;\n    }\n    let id = this.layoutContainer.id;\n    if (!id) {\n      id = 'OT_' + this.cheapUUID();\n      this.layoutContainer.id = id;\n    }\n\n    const HEIGHT =\n      this.getHeight(this.layoutContainer) -\n      this.getCSSNumber(this.layoutContainer, 'borderTop') -\n      this.getCSSNumber(this.layoutContainer, 'borderBottom');\n    const WIDTH =\n      this.getWidth(this.layoutContainer) -\n      this.getCSSNumber(this.layoutContainer, 'borderLeft') -\n      this.getCSSNumber(this.layoutContainer, 'borderRight');\n\n    const availableRatio = HEIGHT / WIDTH;\n\n    let offsetLeft = 0;\n    let offsetTop = 0;\n    let bigOffsetTop = 0;\n    let bigOffsetLeft = 0;\n\n    const bigOnes = Array.prototype.filter.call(\n      this.layoutContainer.querySelectorAll('#' + id + '>.' + this.opts.bigClass),\n      this.filterDisplayNone,\n    );\n    const smallOnes = Array.prototype.filter.call(\n      this.layoutContainer.querySelectorAll('#' + id + '>*:not(.' + this.opts.bigClass + ')'),\n      this.filterDisplayNone,\n    );\n\n    if (bigOnes.length > 0 && smallOnes.length > 0) {\n      let bigWidth, bigHeight;\n\n      if (availableRatio > this.getVideoRatio(bigOnes[0])) {\n        // We are tall, going to take up the whole width and arrange small\n        // guys at the bottom\n        bigWidth = WIDTH;\n        bigHeight = Math.floor(HEIGHT * this.opts.bigPercentage);\n        offsetTop = bigHeight;\n        bigOffsetTop = HEIGHT - offsetTop;\n      } else {\n        // We are wide, going to take up the whole height and arrange the small\n        // guys on the right\n        bigHeight = HEIGHT;\n        bigWidth = Math.floor(WIDTH * this.opts.bigPercentage);\n        offsetLeft = bigWidth;\n        bigOffsetLeft = WIDTH - offsetLeft;\n      }\n      if (this.opts.bigFirst) {\n        this.arrange(\n          bigOnes,\n          bigWidth,\n          bigHeight,\n          0,\n          0,\n          this.opts.bigFixedRatio,\n          this.opts.bigMinRatio,\n          this.opts.bigMaxRatio,\n          this.opts.animate,\n        );\n        this.arrange(\n          smallOnes,\n          WIDTH - offsetLeft,\n          HEIGHT - offsetTop,\n          offsetLeft,\n          offsetTop,\n          this.opts.fixedRatio,\n          this.opts.minRatio,\n          this.opts.maxRatio,\n          this.opts.animate,\n        );\n      } else {\n        this.arrange(\n          smallOnes,\n          WIDTH - offsetLeft,\n          HEIGHT - offsetTop,\n          0,\n          0,\n          this.opts.fixedRatio,\n          this.opts.minRatio,\n          this.opts.maxRatio,\n          this.opts.animate,\n        );\n        this.arrange(\n          bigOnes,\n          bigWidth,\n          bigHeight,\n          bigOffsetLeft,\n          bigOffsetTop,\n          this.opts.bigFixedRatio,\n          this.opts.bigMinRatio,\n          this.opts.bigMaxRatio,\n          this.opts.animate,\n        );\n      }\n    } else if (bigOnes.length > 0 && smallOnes.length === 0) {\n      this\n        // We only have one bigOne just center it\n        .arrange(\n          bigOnes,\n          WIDTH,\n          HEIGHT,\n          0,\n          0,\n          this.opts.bigFixedRatio,\n          this.opts.bigMinRatio,\n          this.opts.bigMaxRatio,\n          this.opts.animate,\n        );\n    } else {\n      this.arrange(\n        smallOnes,\n        WIDTH - offsetLeft,\n        HEIGHT - offsetTop,\n        offsetLeft,\n        offsetTop,\n        this.opts.fixedRatio,\n        this.opts.minRatio,\n        this.opts.maxRatio,\n        this.opts.animate,\n      );\n    }\n  }\n\n  initLayoutContainer(container, opts) {\n    this.opts = {\n      maxRatio: opts.maxRatio != null ? opts.maxRatio : 3 / 2,\n      minRatio: opts.minRatio != null ? opts.minRatio : 9 / 16,\n      fixedRatio: opts.fixedRatio != null ? opts.fixedRatio : false,\n      animate: opts.animate != null ? opts.animate : false,\n      bigClass: opts.bigClass != null ? opts.bigClass : 'OT_big',\n      bigPercentage: opts.bigPercentage != null ? opts.bigPercentage : 0.8,\n      bigFixedRatio: opts.bigFixedRatio != null ? opts.bigFixedRatio : false,\n      bigMaxRatio: opts.bigMaxRatio != null ? opts.bigMaxRatio : 3 / 2,\n      bigMinRatio: opts.bigMinRatio != null ? opts.bigMinRatio : 9 / 16,\n      bigFirst: opts.bigFirst != null ? opts.bigFirst : true,\n    };\n    this.layoutContainer = typeof container === 'string' ? $(container) : container;\n  }\n\n  setLayoutOptions(options) {\n    this.opts = options;\n  }\n}\nexport default OpenViduLayout;\n","class UserModel {\n    connectionId;\n    audioActive;\n    videoActive;\n    screenShareActive;\n    nickname;\n    streamManager;\n    type; // 'remote' | 'local'\n\n    constructor() {\n        this.connectionId = '';\n        this.audioActive = true;\n        this.videoActive = true;\n        this.screenShareActive = false;\n        this.nickname = '';\n        this.streamManager = null;\n        this.type = 'local';\n    }\n\n    isAudioActive() {\n        return this.audioActive;\n    }\n\n    isVideoActive() {\n        return this.videoActive;\n    }\n\n    isScreenShareActive() {\n        return this.screenShareActive;\n    }\n\n    getConnectionId() {\n        return this.connectionId;\n    }\n\n    getNickname() {\n        return this.nickname;\n    }\n\n    getStreamManager() {\n        return this.streamManager;\n    }\n\n    isLocal() {\n        return this.type === 'local';\n    }\n    isRemote() {\n        return !this.isLocal();\n    }\n    setAudioActive(isAudioActive) {\n        this.audioActive = isAudioActive;\n    }\n    setVideoActive(isVideoActive) {\n        this.videoActive = isVideoActive;\n    }\n    setScreenShareActive(isScreenShareActive) {\n        this.screenShareActive = isScreenShareActive;\n    }\n    setStreamManager(streamManager) {\n        this.streamManager = streamManager;\n    }\n\n    setConnectionId(conecctionId) {\n        this.connectionId = conecctionId;\n    }\n    setNickname(nickname) {\n        this.nickname = nickname;\n    }\n    setType(type) {\n        if (type === 'local' |  type === 'remote') {\n            this.type = type;\n        }\n    }\n}\n\nexport default UserModel;\n","import React, { Component } from \"react\";\n\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\n\nimport Mic from \"@material-ui/icons/Mic\";\nimport MicOff from \"@material-ui/icons/MicOff\";\nimport Videocam from \"@material-ui/icons/Videocam\";\nimport VideocamOff from \"@material-ui/icons/VideocamOff\";\nimport PictureInPicture from \"@material-ui/icons/PictureInPicture\";\nimport ScreenShare from \"@material-ui/icons/ScreenShare\";\nimport StopScreenShare from \"@material-ui/icons/StopScreenShare\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\nimport QuestionAnswer from \"@material-ui/icons/QuestionAnswer\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { Button } from \"@material-ui/core\";\n\nexport default class ToolbarComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { fullscreen: false };\n    this.camStatusChanged = this.camStatusChanged.bind(this);\n    this.micStatusChanged = this.micStatusChanged.bind(this);\n    this.screenShare = this.screenShare.bind(this);\n    this.stopScreenShare = this.stopScreenShare.bind(this);\n    this.toggleFullscreen = this.toggleFullscreen.bind(this);\n    this.leaveSession = this.leaveSession.bind(this);\n    this.toggleChat = this.toggleChat.bind(this);\n  }\n\n  micStatusChanged() {\n    this.props.micStatusChanged();\n  }\n\n  camStatusChanged() {\n    this.props.camStatusChanged();\n  }\n\n  screenShare() {\n    this.props.screenShare();\n  }\n\n  stopScreenShare() {\n    this.props.stopScreenShare();\n  }\n\n  toggleFullscreen() {\n    this.setState({ fullscreen: !this.state.fullscreen });\n    this.props.toggleFullscreen();\n  }\n\n  leaveSession() {\n    this.props.leaveSession();\n  }\n\n  toggleChat() {\n    this.props.toggleChat();\n  }\n\n  render() {\n    const mySessionId = this.props.sessionId;\n    const localUser = this.props.user;\n    return (\n      <AppBar className=\"toolbar\" id=\"header\">\n        <Toolbar className=\"toolbar\">\n          <div id=\"navSessionInfo\">\n            {this.props.sessionId && (\n              <div id=\"titleContent\">\n                <Button>Invite</Button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"buttonsContent\">\n            <IconButton\n              color=\"inherit\"\n              className=\"navButton\"\n              id=\"navMicButton\"\n              onClick={this.micStatusChanged}\n            >\n              {localUser !== undefined && localUser.isAudioActive() ? (\n                <Mic />\n              ) : (\n                <MicOff color=\"secondary\" />\n              )}\n            </IconButton>\n\n            <IconButton\n              color=\"inherit\"\n              className=\"navButton\"\n              id=\"navCamButton\"\n              onClick={this.camStatusChanged}\n            >\n              {localUser !== undefined && localUser.isVideoActive() ? (\n                <Videocam />\n              ) : (\n                <VideocamOff color=\"secondary\" />\n              )}\n            </IconButton>\n\n            <IconButton\n              color=\"inherit\"\n              className=\"navButton\"\n              onClick={this.screenShare}\n            >\n              {localUser !== undefined && localUser.isScreenShareActive() ? (\n                <PictureInPicture />\n              ) : (\n                <ScreenShare />\n              )}\n            </IconButton>\n\n            {localUser !== undefined && localUser.isScreenShareActive() && (\n              <IconButton onClick={this.stopScreenShare} id=\"navScreenButton\">\n                <StopScreenShare color=\"secondary\" />\n              </IconButton>\n            )}\n\n            <IconButton\n              color=\"secondary\"\n              className=\"navButton\"\n              onClick={this.leaveSession}\n              id=\"navLeaveButton\"\n            >\n              <CallEndIcon />\n            </IconButton>\n            <IconButton\n              color=\"inherit\"\n              onClick={this.toggleChat}\n              id=\"navChatButton\"\n              style={{ \"top\": \"0\" }}\n            >\n              {this.props.showNotification && <div id=\"point\" className=\"\" />}\n              <Tooltip title=\"Chat\">\n                <QuestionAnswer />\n              </Tooltip>\n            </IconButton>\n          </div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"./VideoRoomComponent.css\";\nimport { OpenVidu } from \"openvidu-browser\";\nimport StreamComponent from \"./stream/StreamComponent\";\nimport DialogExtensionComponent from \"./dialog-extension/DialogExtension\";\nimport ChatComponent from \"./chat/ChatComponent\";\n\nimport OpenViduLayout from \"../layout/openvidu-layout\";\nimport UserModel from \"../models/user-model\";\nimport ToolbarComponent from \"./toolbar/ToolbarComponent\";\n\nvar localUser = new UserModel();\n\nclass VideoRoomComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.OPENVIDU_SERVER_URL = this.props.openviduServerUrl\n      ? this.props.openviduServerUrl\n      : \"https://\" + window.location.hostname + \":4443\";\n    this.OPENVIDU_SERVER_SECRET = this.props.openviduSecret\n      ? this.props.openviduSecret\n      : \"MY_SECRET\";\n    this.hasBeenUpdated = false;\n    this.layout = new OpenViduLayout();\n    let sessionName = this.props.sessionName ? this.props.sessionName : \"new\";\n    let userName = this.props.user\n      ? this.props.user\n      : \"OpenVidu_User\" + Math.floor(Math.random() * 100);\n    this.remotes = [];\n    this.localUserAccessAllowed = false;\n    this.state = {\n      mySessionId: sessionName,\n      myUserName: userName,\n      session: sessionName,\n      localUser: undefined,\n      subscribers: [],\n      chatDisplay: \"none\",\n    };\n\n    this.joinSession = this.joinSession.bind(this);\n    this.leaveSession = this.leaveSession.bind(this);\n    this.onbeforeunload = this.onbeforeunload.bind(this);\n    this.updateLayout = this.updateLayout.bind(this);\n    this.camStatusChanged = this.camStatusChanged.bind(this);\n    this.micStatusChanged = this.micStatusChanged.bind(this);\n    this.nicknameChanged = this.nicknameChanged.bind(this);\n    this.toggleFullscreen = this.toggleFullscreen.bind(this);\n    this.screenShare = this.screenShare.bind(this);\n    this.stopScreenShare = this.stopScreenShare.bind(this);\n    this.closeDialogExtension = this.closeDialogExtension.bind(this);\n    this.toggleChat = this.toggleChat.bind(this);\n    this.checkNotification = this.checkNotification.bind(this);\n    this.checkSize = this.checkSize.bind(this);\n  }\n\n  componentDidMount() {\n    const openViduLayoutOptions = {\n      maxRatio: 3 / 2, // The narrowest ratio that will be used (default 2x3)\n      minRatio: 9 / 16, // The widest ratio that will be used (default 16x9)\n      fixedRatio: false, // If this is true then the aspect ratio of the video is maintained and minRatio and maxRatio are ignored (default false)\n      bigClass: \"OV_big\", // The class to add to elements that should be sized bigger\n      bigPercentage: 0.8, // The maximum percentage of space the big ones should take up\n      bigFixedRatio: false, // fixedRatio for the big ones\n      bigMaxRatio: 3 / 2, // The narrowest ratio to use for the big elements (default 2x3)\n      bigMinRatio: 9 / 16, // The widest ratio to use for the big elements (default 16x9)\n      bigFirst: true, // Whether to place the big one in the top left (true) or bottom right\n      animate: true, // Whether you want to animate the transitions\n    };\n\n    this.layout.initLayoutContainer(\n      document.getElementById(\"layout\"),\n      openViduLayoutOptions\n    );\n    window.addEventListener(\"beforeunload\", this.onbeforeunload);\n    window.addEventListener(\"resize\", this.updateLayout);\n    window.addEventListener(\"resize\", this.checkSize);\n    this.joinSession();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"beforeunload\", this.onbeforeunload);\n    window.removeEventListener(\"resize\", this.updateLayout);\n    window.removeEventListener(\"resize\", this.checkSize);\n    this.leaveSession();\n  }\n\n  onbeforeunload(event) {\n    this.leaveSession();\n  }\n\n  joinSession() {\n    this.OV = new OpenVidu();\n\n    this.setState(\n      {\n        session: this.OV.initSession(),\n      },\n      () => {\n        this.subscribeToStreamCreated();\n        this.connectToSession();\n      }\n    );\n  }\n\n  connectToSession() {\n    if (this.props.token !== undefined) {\n      console.log(\"token received: \", this.props.token);\n      this.connect(this.props.token);\n    } else {\n      this.getToken()\n        .then((token) => {\n          console.log(token);\n          this.connect(token);\n        })\n        .catch((error) => {\n          if (this.props.error) {\n            this.props.error({\n              error: error.error,\n              messgae: error.message,\n              code: error.code,\n              status: error.status,\n            });\n          }\n          console.log(\n            \"There was an error getting the token:\",\n            error.code,\n            error.message\n          );\n          alert(\"There was an error getting the token:\", error.message);\n        });\n    }\n  }\n\n  connect(token) {\n    this.state.session\n      .connect(token, { clientData: this.state.myUserName })\n      .then(() => {\n        this.connectWebCam();\n      })\n      .catch((error) => {\n        if (this.props.error) {\n          this.props.error({\n            error: error.error,\n            messgae: error.message,\n            code: error.code,\n            status: error.status,\n          });\n        }\n        alert(\"There was an error connecting to the session:\", error.message);\n        console.log(\n          \"There was an error connecting to the session:\",\n          error.code,\n          error.message\n        );\n      });\n  }\n\n  connectWebCam() {\n    let publisher = this.OV.initPublisher(undefined, {\n      audioSource: undefined,\n      videoSource: undefined,\n      publishAudio: localUser.isAudioActive(),\n      publishVideo: localUser.isVideoActive(),\n      resolution: \"640x480\",\n      frameRate: 30,\n      insertMode: \"APPEND\",\n    });\n\n    if (this.state.session.capabilities.publish) {\n      publisher.on(\"accessAllowed\", () => {\n        this.state.session.publish(publisher).then(() => {\n          this.updateSubscribers();\n          this.localUserAccessAllowed = true;\n          if (this.props.joinSession) {\n            this.props.joinSession();\n          }\n        });\n      });\n    }\n    localUser.setNickname(this.state.myUserName);\n    localUser.setConnectionId(this.state.session.connection.connectionId);\n    localUser.setScreenShareActive(false);\n    localUser.setStreamManager(publisher);\n    this.subscribeToUserChanged();\n    this.subscribeToStreamDestroyed();\n    this.sendSignalUserChanged({\n      isScreenShareActive: localUser.isScreenShareActive(),\n    });\n\n    this.setState({ localUser: localUser }, () => {\n      this.state.localUser.getStreamManager().on(\"streamPlaying\", (e) => {\n        this.updateLayout();\n        publisher.videos[0].video.parentElement.classList.remove(\n          \"custom-class\"\n        );\n      });\n    });\n  }\n\n  updateSubscribers() {\n    var subscribers = this.remotes;\n    this.setState(\n      {\n        subscribers: subscribers,\n      },\n      () => {\n        if (this.state.localUser) {\n          this.sendSignalUserChanged({\n            isAudioActive: this.state.localUser.isAudioActive(),\n            isVideoActive: this.state.localUser.isVideoActive(),\n            nickname: this.state.localUser.getNickname(),\n            isScreenShareActive: this.state.localUser.isScreenShareActive(),\n          });\n        }\n        this.updateLayout();\n      }\n    );\n  }\n\n  leaveSession() {\n    const mySession = this.state.session;\n\n    if (mySession) {\n      mySession.disconnect();\n    }\n\n    // Empty all properties...\n    this.OV = null;\n    this.setState({\n      session: undefined,\n      subscribers: [],\n      mySessionId: \"SessionA\",\n      myUserName: \"OpenVidu_User\" + Math.floor(Math.random() * 100),\n      localUser: undefined,\n    });\n    if (this.props.leaveSession) {\n      this.props.leaveSession();\n    }\n  }\n  camStatusChanged() {\n    localUser.setVideoActive(!localUser.isVideoActive());\n    localUser.getStreamManager().publishVideo(localUser.isVideoActive());\n    this.sendSignalUserChanged({ isVideoActive: localUser.isVideoActive() });\n    this.setState({ localUser: localUser });\n  }\n\n  micStatusChanged() {\n    localUser.setAudioActive(!localUser.isAudioActive());\n    localUser.getStreamManager().publishAudio(localUser.isAudioActive());\n    this.sendSignalUserChanged({ isAudioActive: localUser.isAudioActive() });\n    this.setState({ localUser: localUser });\n  }\n\n  nicknameChanged(nickname) {\n    let localUser = this.state.localUser;\n    localUser.setNickname(nickname);\n    this.setState({ localUser: localUser });\n    this.sendSignalUserChanged({\n      nickname: this.state.localUser.getNickname(),\n    });\n  }\n\n  deleteSubscriber(stream) {\n    const remoteUsers = this.state.subscribers;\n    const userStream = remoteUsers.filter(\n      (user) => user.getStreamManager().stream === stream\n    )[0];\n    let index = remoteUsers.indexOf(userStream, 0);\n    if (index > -1) {\n      remoteUsers.splice(index, 1);\n      this.setState({\n        subscribers: remoteUsers,\n      });\n    }\n  }\n\n  subscribeToStreamCreated() {\n    this.state.session.on(\"streamCreated\", (event) => {\n      const subscriber = this.state.session.subscribe(event.stream, undefined);\n      // var subscribers = this.state.subscribers;\n      subscriber.on(\"streamPlaying\", (e) => {\n        this.checkSomeoneShareScreen();\n        subscriber.videos[0].video.parentElement.classList.remove(\n          \"custom-class\"\n        );\n      });\n      const newUser = new UserModel();\n      newUser.setStreamManager(subscriber);\n      newUser.setConnectionId(event.stream.connection.connectionId);\n      newUser.setType(\"remote\");\n      const nickname = event.stream.connection.data.split(\"%\")[0];\n      newUser.setNickname(JSON.parse(nickname).clientData);\n      this.remotes.push(newUser);\n      if (this.localUserAccessAllowed) {\n        this.updateSubscribers();\n      }\n    });\n  }\n\n  subscribeToStreamDestroyed() {\n    // On every Stream destroyed...\n    this.state.session.on(\"streamDestroyed\", (event) => {\n      // Remove the stream from 'subscribers' array\n      this.deleteSubscriber(event.stream);\n      setTimeout(() => {\n        this.checkSomeoneShareScreen();\n      }, 20);\n      event.preventDefault();\n      this.updateLayout();\n    });\n  }\n\n  subscribeToUserChanged() {\n    this.state.session.on(\"signal:userChanged\", (event) => {\n      let remoteUsers = this.state.subscribers;\n      remoteUsers.forEach((user) => {\n        if (user.getConnectionId() === event.from.connectionId) {\n          const data = JSON.parse(event.data);\n          console.log(\"EVENTO REMOTE: \", event.data);\n          if (data.isAudioActive !== undefined) {\n            user.setAudioActive(data.isAudioActive);\n          }\n          if (data.isVideoActive !== undefined) {\n            user.setVideoActive(data.isVideoActive);\n          }\n          if (data.nickname !== undefined) {\n            user.setNickname(data.nickname);\n          }\n          if (data.isScreenShareActive !== undefined) {\n            user.setScreenShareActive(data.isScreenShareActive);\n          }\n        }\n      });\n      this.setState(\n        {\n          subscribers: remoteUsers,\n        },\n        () => this.checkSomeoneShareScreen()\n      );\n    });\n  }\n\n  updateLayout() {\n    setTimeout(() => {\n      this.layout.updateLayout();\n    }, 20);\n  }\n\n  sendSignalUserChanged(data) {\n    const signalOptions = {\n      data: JSON.stringify(data),\n      type: \"userChanged\",\n    };\n    this.state.session.signal(signalOptions);\n  }\n\n  toggleFullscreen() {\n    const document = window.document;\n    const fs = document.getElementById(\"container\");\n    if (\n      !document.fullscreenElement &&\n      !document.mozFullScreenElement &&\n      !document.webkitFullscreenElement &&\n      !document.msFullscreenElement\n    ) {\n      if (fs.requestFullscreen) {\n        fs.requestFullscreen();\n      } else if (fs.msRequestFullscreen) {\n        fs.msRequestFullscreen();\n      } else if (fs.mozRequestFullScreen) {\n        fs.mozRequestFullScreen();\n      } else if (fs.webkitRequestFullscreen) {\n        fs.webkitRequestFullscreen();\n      }\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      }\n    }\n  }\n\n  screenShare() {\n    const videoSource =\n      navigator.userAgent.indexOf(\"Firefox\") !== -1 ? \"window\" : \"screen\";\n    const publisher = this.OV.initPublisher(\n      undefined,\n      {\n        videoSource: videoSource,\n        publishAudio: localUser.isAudioActive(),\n        publishVideo: localUser.isVideoActive(),\n        mirror: false,\n      },\n      (error) => {\n        if (error && error.name === \"SCREEN_EXTENSION_NOT_INSTALLED\") {\n          this.setState({ showExtensionDialog: true });\n        } else if (error && error.name === \"SCREEN_SHARING_NOT_SUPPORTED\") {\n          alert(\"Your browser does not support screen sharing\");\n        } else if (error && error.name === \"SCREEN_EXTENSION_DISABLED\") {\n          alert(\"You need to enable screen sharing extension\");\n        } else if (error && error.name === \"SCREEN_CAPTURE_DENIED\") {\n          alert(\"You need to choose a window or application to share\");\n        }\n      }\n    );\n\n    publisher.once(\"accessAllowed\", () => {\n      this.state.session.unpublish(localUser.getStreamManager());\n      localUser.setStreamManager(publisher);\n      this.state.session.publish(localUser.getStreamManager()).then(() => {\n        localUser.setScreenShareActive(true);\n        this.setState({ localUser: localUser }, () => {\n          this.sendSignalUserChanged({\n            isScreenShareActive: localUser.isScreenShareActive(),\n          });\n        });\n      });\n    });\n    publisher.on(\"streamPlaying\", () => {\n      this.updateLayout();\n      publisher.videos[0].video.parentElement.classList.remove(\"custom-class\");\n    });\n  }\n\n  closeDialogExtension() {\n    this.setState({ showExtensionDialog: false });\n  }\n\n  stopScreenShare() {\n    this.state.session.unpublish(localUser.getStreamManager());\n    this.connectWebCam();\n  }\n\n  checkSomeoneShareScreen() {\n    let isScreenShared;\n    // return true if at least one passes the test\n    isScreenShared =\n      this.state.subscribers.some((user) => user.isScreenShareActive()) ||\n      localUser.isScreenShareActive();\n    const openviduLayoutOptions = {\n      maxRatio: 3 / 2,\n      minRatio: 9 / 16,\n      fixedRatio: isScreenShared,\n      bigClass: \"OV_big\",\n      bigPercentage: 0.8,\n      bigFixedRatio: false,\n      bigMaxRatio: 3 / 2,\n      bigMinRatio: 9 / 16,\n      bigFirst: true,\n      animate: true,\n    };\n    this.layout.setLayoutOptions(openviduLayoutOptions);\n    this.updateLayout();\n  }\n\n  toggleChat(property) {\n    let display = property;\n\n    if (display === undefined) {\n      display = this.state.chatDisplay === \"none\" ? \"block\" : \"none\";\n    }\n    if (display === \"block\") {\n      this.setState({ chatDisplay: display, messageReceived: false });\n    } else {\n      console.log(\"chat\", display);\n      this.setState({ chatDisplay: display });\n    }\n    this.updateLayout();\n  }\n\n  checkNotification(event) {\n    this.setState({\n      messageReceived: this.state.chatDisplay === \"none\",\n    });\n  }\n  checkSize() {\n    if (\n      document.getElementById(\"layout\").offsetWidth <= 700 &&\n      !this.hasBeenUpdated\n    ) {\n      this.toggleChat(\"none\");\n      this.hasBeenUpdated = true;\n    }\n    if (\n      document.getElementById(\"layout\").offsetWidth > 700 &&\n      this.hasBeenUpdated\n    ) {\n      this.hasBeenUpdated = false;\n    }\n  }\n\n  render() {\n    const mySessionId = this.state.mySessionId;\n    const localUser = this.state.localUser;\n    var chatDisplay = { display: this.state.chatDisplay };\n\n    return (\n      <div className=\"container\" id=\"container\">\n        <ToolbarComponent\n          sessionId={mySessionId}\n          user={localUser}\n          showNotification={this.state.messageReceived}\n          camStatusChanged={this.camStatusChanged}\n          micStatusChanged={this.micStatusChanged}\n          screenShare={this.screenShare}\n          stopScreenShare={this.stopScreenShare}\n          toggleFullscreen={this.toggleFullscreen}\n          leaveSession={this.leaveSession}\n          toggleChat={this.toggleChat}\n        />\n\n        <DialogExtensionComponent\n          showDialog={this.state.showExtensionDialog}\n          cancelClicked={this.closeDialogExtension}\n        />\n\n        <div id=\"layout\" className=\"bounds\">\n          {localUser !== undefined &&\n            localUser.getStreamManager() !== undefined && (\n              <div className=\"OT_root OT_publisher custom-class\" id=\"localUser\">\n                <StreamComponent\n                  user={localUser}\n                  handleNickname={this.nicknameChanged}\n                />\n              </div>\n            )}\n          {this.state.subscribers.map((sub, i) => (\n            <div\n              key={i}\n              className=\"OT_root OT_publisher custom-class\"\n              id=\"remoteUsers\"\n            >\n              <StreamComponent\n                user={sub}\n                streamId={sub.streamManager.stream.streamId}\n              />\n            </div>\n          ))}\n          {localUser !== undefined &&\n            localUser.getStreamManager() !== undefined && (\n              <div\n                className=\"OT_root OT_publisher custom-class\"\n                style={chatDisplay}\n              >\n                <ChatComponent\n                  user={localUser}\n                  chatDisplay={this.state.chatDisplay}\n                  close={this.toggleChat}\n                  messageReceived={this.checkNotification}\n                />\n              </div>\n            )}\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * --------------------------\n   * SERVER-SIDE RESPONSIBILITY\n   * --------------------------\n   * These methods retrieve the mandatory user token from OpenVidu Server.\n   * This behaviour MUST BE IN YOUR SERVER-SIDE IN PRODUCTION (by using\n   * the API REST, openvidu-java-client or openvidu-node-client):\n   *   1) Initialize a session in OpenVidu Server\t(POST /api/sessions)\n   *   2) Generate a token in OpenVidu Server\t\t(POST /api/tokens)\n   *   3) The token must be consumed in Session.connect() method\n   */\n\n  getToken() {\n    return this.createSession(this.state.mySessionId).then((sessionId) =>\n      this.createToken(sessionId)\n    );\n  }\n\n  createSession(sessionId) {\n    return new Promise((resolve, reject) => {\n      var data = JSON.stringify({ customSessionId: sessionId });\n      // axios\n      //     .post(this.OPENVIDU_SERVER_URL + '/openvidu/api/sessions', data, {\n      //         headers: {\n      //             Authorization: 'Basic ' + btoa('OPENVIDUAPP:' + this.OPENVIDU_SERVER_SECRET),\n      //             'Content-Type': 'application/json',\n      //         },\n      //     })\n      // .then((response) => {\n      // console.log('CREATE SESION', response);\n      // resolve(response.data.id);\n      //     })\n      //     .catch((response) => {\n      //         var error = Object.assign({}, response);\n      //         if (error.response && error.response.status === 409) {\n      //             resolve(sessionId);\n      //         } else {\n      //             console.log(error);\n      //             console.warn(\n      //                 'No connection to OpenVidu Server. This may be a certificate error at ' + this.OPENVIDU_SERVER_URL,\n      //             );\n      //             if (\n      //                 window.confirm(\n      //                     'No connection to OpenVidu Server. This may be a certificate error at \"' +\n      //                         this.OPENVIDU_SERVER_URL +\n      //                         '\"\\n\\nClick OK to navigate and accept it. ' +\n      //                         'If no certificate warning is shown, then check that your OpenVidu Server is up and running at \"' +\n      //                         this.OPENVIDU_SERVER_URL +\n      //                         '\"',\n      //                 )\n      //             ) {\n      //                 window.location.assign(this.OPENVIDU_SERVER_URL + '/accept-certificate');\n      //             }\n      //         }\n      //     });\n      var config = {\n        method: \"post\",\n        url: \"/api/video/create\",\n        headers: {\n          Authorization:\n          \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTQsIm5hbWUiOiJNZWV0IFNoYWgiLCJpYXQiOjE2MjQ2NTE1MDd9.7prfxCA4FKaFL2L_LcTG9qEuy6h6CiJVSDyqGRS6H8s\",\n          \"Content-Type\": \"application/json\",\n        },\n        data: data,\n      };\n\n      axios(config)\n        .then(function (response) {\n          console.log(\"CREATE SESION\", response);\n          resolve(response.data.session_id);\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    });\n  }\n\n  createToken(sessionId) {\n    return new Promise((resolve, reject) => {\n      var data = JSON.stringify({});\n      //   axios\n      //     .post(\n      //       this.OPENVIDU_SERVER_URL +\n      //         \"/openvidu/api/sessions/\" +\n      //         sessionId +\n      //         \"/connection\",\n      //       data,\n      //       {\n      //         headers: {\n      //           Authorization:\n      //             \"Basic \" + btoa(\"OPENVIDUAPP:\" + this.OPENVIDU_SERVER_SECRET),\n      //           \"Content-Type\": \"application/json\",\n      //         },\n      //       }\n      //     )\n      //     .then((response) => {\n      //       console.log(\"TOKEN\", response);\n      //       resolve(response.data.token);\n      //     })\n      //     .catch((error) => reject(error));\n\n      var config = {\n        method: \"post\",\n        url: \"/api/vc/\" + sessionId,\n        headers: {\n          Authorization:\n            \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTMsIm5hbWUiOiJNZWV0IFNoYWgiLCJpYXQiOjE2MjQ1NzkwMzR9.nWWp1uzyrWGn4Sfl2ro_r3UxDiH6gxHexRLW2vzyamc\",\n        },\n      };\n\n      axios(config)\n        .then(function (response) {\n          console.log(JSON.stringify(response.data));\n          console.log(\"TOKEN\", response);\n          resolve(response.data.token);\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    });\n  }\n}\nexport default VideoRoomComponent;\n","import { useParams } from \"react-router-dom\";\nimport VideoRoomComponent from \"./VideoRoomComponent\";\nexport default function Vc() {\n  const { sid } = useParams();\n\n  return (\n      <>\n        <VideoRoomComponent sessionName={sid}></VideoRoomComponent>\n      <h1>{sid}</h1>\n    </>\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { deepOrange } from \"@material-ui/core/colors\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ShareIcon from \"@material-ui/icons/Share\";\nimport {\n  Avatar,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  InputAdornment,\n  Paper,\n} from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { io } from \"socket.io-client\";\nimport jwt_decode from \"jwt-decode\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport VideoCall from \"@material-ui/icons/VideoCall\";\nimport Videocam from \"@material-ui/icons/Videocam\";\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  orange: {\n    color: theme.palette.getContrastText(deepOrange[500]),\n    backgroundColor: deepOrange[500],\n  },\n  toolbar: {\n    paddingRight: 24, // keep right padding when drawer closed\n  },\n  toolbarIcon: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: \"0 8px\",\n    ...theme.mixins.toolbar,\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  menuButtonHidden: {\n    display: \"none\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  drawerPaper: {\n    position: \"relative\",\n    height: \"100vh\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    overflowX: \"hidden\",\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    position: \"relative\",\n    height: \"100vh\",\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9),\n    },\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\",\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n    maxWidth: 900,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\",\n  },\n  fixedHeight: {\n    height: 240,\n  },\n  bottomToolbar: {\n    position: \"absolute\",\n\n    paddingTop: \"0\",\n    bottom: \"0\",\n    left: \"0\",\n    width: 240,\n    background: \"#fafafa\",\n  },\n}));\n\nconst socket = io().connect();\nexport default function TeamPage() {\n  const history = useHistory();\n  const { secret } = useParams();\n  const message = useRef(\"\");\n  const [messages, setMessages] = useState([]);\n  const [channels, setChannels] = useState([]);\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(true);\n  const [openChannel, setOpenChannel] = useState();\n  const [createChannelOpen, setCreateChannelOpen] = useState(false);\n  const [invite, setInvite] = useState(false);\n  const [channel, setChannel] = useState(\"\");\n  useEffect(() => {\n    if (!Cookies.get(\"token\")) {\n      history.push(\"/\");\n    }\n    console.log(socket);\n    socket.on(\"message\", function (data) {\n      console.log(data.message);\n      setMessages((messages) => [...messages, data.message]);\n      var element = document.getElementById(\"main-container\");\n      element.scrollTop = element.scrollHeight;\n    });\n    loadChannels();\n    // var elmnt = document.getElementById(\"50\");\n    // elmnt.scrollIntoView();\n  }, []);\n\n  const handleKeyDown = (event) => {\n    if (event.key === \"Enter\") {\n      sendMessage();\n    }\n  };\n  const handleCreateOpen = () => {\n    setCreateChannelOpen(true);\n  };\n\n  const handleCreateClose = () => {\n    setCreateChannelOpen(false);\n  };\n\n  const handleInviteOpen = () => {\n    setInvite(true);\n  };\n\n  const handleInviteClose = () => {\n    setInvite(false);\n  };\n\n  const onCreateChannel = () => {\n    handleCreateClose();\n    var data = JSON.stringify({ name: channel });\n    var config = {\n      method: \"put\",\n      url: `/api/secure/channels/${secret}`,\n      headers: {\n        Authorization: `Bearer ${Cookies.get(\"token\")}`,\n        \"Content-Type\": \"application/json\",\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        loadChannels();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  function sendMessage(is_vc = false) {\n    console.log(message.current.value);\n    console.log(socket);\n    var d = new Date();\n    let messageJSON;\n    if (!is_vc) {\n      messageJSON = {\n        text: message.current.value,\n        timestamp: new Date(d.getTime() + 5.5 * 60 * 60 * 1000).toUTCString(),\n        is_vc: is_vc,\n        sender: { name: jwt_decode(Cookies.get(\"token\")).name },\n      };\n    } else {\n      messageJSON = {\n        text: `/vc/${Math.random().toString(36).substring(7)}`,\n        timestamp: new Date(d.getTime() + 5.5 * 60 * 60 * 1000).toUTCString(),\n        is_vc: is_vc,\n        sender: { name: jwt_decode(Cookies.get(\"token\")).name },\n      };\n    }\n    console.log(messageJSON + \":\" + openChannel);\n    socket.emit(\"send\", {\n      room: openChannel,\n      message: messageJSON,\n    });\n    var data = JSON.stringify({ text: messageJSON.text, is_vc: is_vc });\n    message.current.value = \"\";\n    var config = {\n      method: \"put\",\n      url: `/api/secure/messages/${openChannel}`,\n      headers: {\n        Authorization: `Bearer ${Cookies.get(\"token\")}`,\n        \"Content-Type\": \"application/json\",\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n  function loadMessages(channel) {\n    console.log(channel);\n    var config = {\n      method: \"get\",\n      url: `/api/secure/messages/${channel}`,\n      headers: {\n        Authorization: `Bearer ${Cookies.get(\"token\")}`,\n      },\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        setMessages(response.data);\n        var element = document.getElementById(\"main-container\");\n        element.scrollTop = element.scrollHeight;\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function loadChannels() {\n    var config = {\n      method: \"get\",\n      url: `/api/secure/channels/${secret}`,\n      headers: {\n        Authorization: `Bearer ${Cookies.get(\"token\")}`,\n      },\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        setChannels(response.data);\n        clickChannel(response.data[0].secret);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function clickChannel(channel) {\n    console.log(channel);\n    if (openChannel) {\n      socket.emit(\"unsubscribe\", openChannel);\n      document.getElementById(openChannel).style.backgroundColor = \"\";\n    }\n\n    setOpenChannel(channel);\n    document.getElementById(channel).style.backgroundColor = \"grey\";\n    socket.emit(\"subscribe\", channel);\n    loadMessages(channel);\n  }\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <div>\n        <Dialog\n          open={createChannelOpen}\n          onClose={handleCreateClose}\n          aria-labelledby=\"form-dialog-title\"\n          maxWidth=\"xs\"\n          fullWidth={true}\n        >\n          <DialogTitle id=\"form-dialog-title\">Create New Channel</DialogTitle>\n          <DialogContent>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"name\"\n              label=\"Team Name\"\n              fullWidth\n              value={channel}\n              onChange={(e) => setChannel(e.target.value)}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleCreateClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={onCreateChannel} color=\"primary\">\n              Create Channel\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n      <div>\n        <Dialog\n          open={invite}\n          onClose={handleInviteClose}\n          aria-labelledby=\"form-dialog-title\"\n          maxWidth=\"xs\"\n          fullWidth={true}\n        >\n          <DialogTitle id=\"form-dialog-title\">Invite to team</DialogTitle>\n          <DialogContent style={{ justifyItems: \"center\" }}>\n            <Button\n              onClick={() => {\n                handleInviteClose();\n                let s = window.location.toString();\n                navigator.clipboard.writeText(s.replace(\"team\", \"home\"));\n              }}\n              color=\"primary\"\n            >\n              Copy magic link\n            </Button>\n            <Button\n              onClick={() => {\n                handleInviteClose();\n                navigator.clipboard.writeText(secret);\n              }}\n              color=\"secondary\"\n              style={{ paddingLeft: 12 }}\n            >\n              Copy team code\n            </Button>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleInviteClose} color=\"primary\">\n              Done\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n      <CssBaseline />\n      <AppBar\n        position=\"absolute\"\n        className={clsx(classes.appBar, open && classes.appBarShift)}\n      >\n        <Toolbar className={classes.toolbar}>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            className={clsx(\n              classes.menuButton,\n              open && classes.menuButtonHidden\n            )}\n          >\n            <ChevronRightIcon />\n          </IconButton>\n          <Typography\n            component=\"h1\"\n            variant=\"h4\"\n            color=\"inherit\"\n            noWrap\n            className={classes.title}\n          >\n            Relier\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        variant=\"permanent\"\n        classes={{\n          paper: clsx(classes.drawerPaper, !open && classes.drawerPaperClose),\n        }}\n        open={open}\n      >\n        <List>\n          <ListItem button>\n            <ListItemIcon onClick={handleDrawerClose}>\n              <ChevronLeftIcon />\n            </ListItemIcon>\n            <ListItemText primary=\"Team name\" />\n          </ListItem>\n        </List>\n        {/* <div className={classes.toolbarIcon}>\n          <IconButton onClick={handleDrawerClose}>\n            <ChevronLeftIcon />\n          </IconButton>\n              </div>\n     */}\n        <Divider />\n        <List\n          style={{\n            height: \"calc(100vh-179px}\",\n            overflowY: \"auto\",\n            overflowX: \"hidden\",\n          }}\n        >\n          <div>\n            {channels.map((channel) => (\n              <ListItem\n                button\n                id={channel.secret}\n                onClick={(e) => {\n                  clickChannel(e.currentTarget.id);\n                }}\n              >\n                <ListItemIcon>\n                  <Avatar variant=\"rounded\" className={classes.orange}>\n                    {channel.name.substring(0, 1)}\n                  </Avatar>\n                </ListItemIcon>\n                <ListItemText primary={channel.name} />\n              </ListItem>\n            ))}\n          </div>\n        </List>\n        <List className={classes.bottomToolbar}>\n          <Divider />\n          <ListItem\n            button\n            style={{ paddingTop: 10 }}\n            onClick={handleCreateOpen}\n          >\n            <ListItemIcon style={{ paddingLeft: 6 }}>\n              <AddIcon color=\"secondary\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Add channels\" />\n          </ListItem>\n          <ListItem button onClick={handleInviteOpen}>\n            <ListItemIcon style={{ paddingLeft: 6 }}>\n              <ShareIcon color=\"secondary\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Invite to Team\" />\n          </ListItem>\n        </List>\n      </Drawer>\n      <main className={classes.content} id=\"main-container\">\n        <div className={classes.appBarSpacer} />\n        <Container\n          maxWidth=\"lg\"\n          className={classes.container}\n          style={{ paddingBottom: 0 }}\n        >\n          <Grid container spacing={3} style={{ paddingBottom: 0 }}>\n            <Grid item xs={12}>\n              {messages.map((message) => (\n                <Paper\n                  id={message.id}\n                  elevation={1}\n                  style={{ padding: 12, marginBottom: 24 }}\n                >\n                  <Grid container spacing={3} style={{ overflow: true }}>\n                    <Grid item xs={1} style={{ paddingBottom: 0 }}>\n                      {message.is_vc ? (\n                        <Videocam\n                          style={{\n                            height: 32,\n                            width: 32,\n                            margin: \"auto\",\n                            paddingBottom: 0,\n                          }}\n                        />\n                      ) : (\n                        <Avatar\n                          variant=\"rounded\"\n                          className={classes.orange}\n                          style={{\n                            height: 32,\n                            width: 32,\n                            margin: \"auto\",\n                            paddingBottom: 0,\n                          }}\n                        >\n                          {message.sender.name.substring(0, 1)}\n                        </Avatar>\n                      )}\n                    </Grid>\n                    <Grid\n                      item\n                      xs={5}\n                      style={{ paddingLeft: 0, paddingBottom: 0 }}\n                    >\n                      {message.is_vc ? (\n                        <Link\n                          to={message.text}\n                          style={{ textDecoration: \"none\" }}\n                          target=\"_blank\"\n                        >\n                          <Typography align=\"left\" color=\"primary\">\n                            {\"Join Call\"}\n                          </Typography>\n                        </Link>\n                      ) : (\n                        <Typography align=\"left\" color=\"primary\">\n                          {message.sender.name}\n                        </Typography>\n                      )}\n                    </Grid>\n                    <Grid item xs={6} style={{ paddingBottom: 0 }}>\n                      <Typography align=\"right\" color=\"textSecondary\">\n                        {message.timestamp.split(\":\")[0].slice(-2) +\n                          \":\" +\n                          message.timestamp.split(\":\")[1]}\n                      </Typography>\n                    </Grid>\n                    <Grid\n                      item\n                      xs={11}\n                      style={{\n                        marginLeft: \"auto\",\n                        paddingLeft: 0,\n                        paddingTop: 0,\n                      }}\n                    >\n                      {message.is_vc ? (\n                        <Typography align=\"left\">\n                          {\"Started by \" + message.sender.name}\n                        </Typography>\n                      ) : (\n                        <Typography align=\"left\">{message.text}</Typography>\n                      )}\n                    </Grid>\n                  </Grid>\n                </Paper>\n              ))}\n            </Grid>\n            <Grid\n              item\n              xs={12}\n              style={{\n                position: \"sticky\",\n                bottom: 0,\n                paddingBottom: 24,\n                paddingTop: 24,\n                backgroundColor: \"#fafafa\",\n                width: 900,\n              }}\n            >\n              <TextField\n                id=\"outlined-textarea\"\n                label=\"Message\"\n                placeholder=\"Message\"\n                inputRef={message}\n                type=\"text\"\n                multiline\n                variant=\"outlined\"\n                fullWidth\n                onKeyDown={handleKeyDown}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        aria-label=\"send\"\n                        edge=\"end\"\n                        onClick={() => {\n                          sendMessage(true);\n                        }}\n                      >\n                        <VideoCall fontSize=\"large\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"send\"\n                        edge=\"end\"\n                        onClick={() => {\n                          sendMessage();\n                        }}\n                      >\n                        <SendIcon />\n                      </IconButton>\n                    </InputAdornment>\n                  ),\n                }}\n              />\n            </Grid>\n          </Grid>\n        </Container>\n      </main>\n    </div>\n  );\n}\n","import \"./App.css\";\nimport { Grid } from \"@material-ui/core\";\nimport { Card } from \"@material-ui/core\";\nimport SignIn from \"./components/Signin\";\nimport SignUp from \"./components/Signup\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport ReactCardFlip from \"react-card-flip\";\nimport { useHistory } from \"react-router-dom\";\nimport HomePage from \"./components/HomePage\";\nimport Vc from \"./components/Vc\";\nimport validator from \"validator\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { useLocation } from \"react-router-dom\";\nimport TeamPage from \"./components/TeamPage\";\n\nfunction App() {\n  const history = useHistory();\n  const location = useLocation();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailWarn, setEmailWarn] = useState(false);\n  const [passwordWarn, setPasswordWarn] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [flipped, setFlipped] = useState(false);\n\n  useEffect(() => {\n    console.log(location.pathname);\n    if (Cookies.get(\"token\") && location.pathname === \"/\") {\n      history.push(\"/home\");\n    }\n  }, [history]);\n  const changeEmail = (email) => {\n    setEmail(email);\n    if (validator.isEmail(email)) {\n      setEmailWarn(false);\n    } else {\n      setEmailWarn(true);\n    }\n  };\n  const changePassword = (password) => {\n    setPassword(password);\n    if (\n      validator.isStrongPassword(password, {\n        minLength: 8,\n        minLowercase: 0,\n        minUppercase: 0,\n        minNumbers: 0,\n        minSymbols: 1,\n      })\n    ) {\n      setPasswordWarn(false);\n    } else {\n      setPasswordWarn(true);\n    }\n  };\n  const login = () => {\n    if (\n      validator.isEmail(email) &&\n      validator.isStrongPassword(password, {\n        minLength: 8,\n        minLowercase: 0,\n        minUppercase: 0,\n        minNumbers: 0,\n        minSymbols: 1,\n      })\n    ) {\n      var data = JSON.stringify({\n        email: email,\n        password: password,\n      });\n\n      var config = {\n        method: \"post\",\n        url: \"/api/login\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        data: data,\n      };\n\n      axios(config)\n        .then(function (response) {\n          console.log(JSON.stringify(response.data));\n          Cookies.set(\"token\", response.data.token, {\n            expires: 365,\n            secure: true,\n          });\n          history.push(\"/home\");\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  };\n\n  const register = () => {\n    if (\n      validator.isEmail(email) &&\n      validator.isStrongPassword(password, {\n        minLength: 8,\n        minLowercase: 0,\n        minUppercase: 0,\n        minNumbers: 0,\n        minSymbols: 1,\n      })\n    ) {\n      var data = JSON.stringify({\n        email: email,\n        password: password,\n        name: name,\n      });\n\n      var config = {\n        method: \"post\",\n        url: \"/api/users\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        data: data,\n      };\n\n      axios(config)\n        .then(function (response) {\n          console.log(JSON.stringify(response.data));\n          Cookies.set(\"token\", response.data.token, {\n            expires: 365,\n            secure: true,\n          });\n          history.push(\"/home\");\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <Route\n        path=\"/\"\n        exact\n        render={(props) => (\n          <>\n            <div className=\"login\">\n              <Grid\n                container\n                direction=\"column\"\n                justify=\"center\"\n                alignItems=\"center\"\n                style={{ minHeight: \"100vh\", background: \"#fafafa\" }}\n              >\n                <Grid container item xs={3}>\n                  <AppBar style={{ alignItems: \"flex-start\" }}>\n                    <Toolbar>\n                      <Grid container justify=\"flex-start\">\n                        <Typography variant=\"h4\" color=\"inherit\" noWrap>\n                          Relier\n                        </Typography>\n                      </Grid>\n                    </Toolbar>\n                  </AppBar>\n                </Grid>\n                <Grid container item xs={3}>\n                  <ReactCardFlip isFlipped={flipped} flipDirection=\"vertical\">\n                    <Card elevation={3}>\n                      <SignIn\n                        email={email}\n                        changeEmail={changeEmail}\n                        password={password}\n                        changePassword={changePassword}\n                        onLogin={login}\n                        setFlip={setFlipped}\n                        emailWarn={emailWarn}\n                        passwordWarn={passwordWarn}\n                      ></SignIn>\n                    </Card>\n                    <Card elevation={3}>\n                      <SignUp\n                        email={email}\n                        changeEmail={changeEmail}\n                        password={password}\n                        changePassword={changePassword}\n                        name={name}\n                        setName={setName}\n                        setFlip={setFlipped}\n                        onRegister={register}\n                        emailWarn={emailWarn}\n                        passwordWarn={passwordWarn}\n                      ></SignUp>\n                    </Card>\n                  </ReactCardFlip>\n                </Grid>\n              </Grid>\n            </div>\n          </>\n        )}\n      />\n      <Route path=\"/home/:teamSecret?\">\n        <HomePage />\n      </Route>\n      <Route path=\"/vc/:sid\">\n        <Vc />\n      </Route>\n      <Route path=\"/team/:secret\">\n        <TeamPage />\n      </Route>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from \"react-router-dom\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}